# -*- coding: utf-8 -*-
# vim: ft=yaml
#
{% macro debian_codename(name, codename=none) %}
{{ codename|default(name, true) }}:
  isns:
    pkgs:
          {%- if name in ('wheezy', 'trusty',) %}
      wanted: ['isns', 'isns-client']
          {%- elif name in ('stretch',) %}
      wanted: ['libisns0',]
          {%- elif name in ('xenial', 'jessie') %}
      wanted: []
          {%- else %}
      wanted: ['open-isns-server', 'open-isns-utils', 'open-isns-discoveryd',]
          {%- endif %}
  target:
    pkgs:
          {%- if name in ('wheezy', 'trusty',) %}
      wanted: ['python-configshell', 'python-rtslib', 'targetcli', 'tgt-glusterfs', 'tgt-rbd']
          {%- elif name in ('jessie',) %}
      wanted: ['tgt-glusterfs', 'tgt-rbd',]
          {%- elif name in ('xenial',) %}
      wanted: ['python-configshell', 'tgt', 'python-rtslib', 'targetcli']
          {%- else %}
      wanted: ['python-configshell-fb', 'tgt', 'tgt-rbd', 'python-rtslib-fb', 'targetcli-fb', 'iscsiuio']
          {%- endif %}
{% endmacro %}

{% macro fedora_codename(name, release, codename) %}
{{ codename|default(name, true) }}:
      {%- if release > 26 %}
  isns:
    pkgs:
      wanted:
        - isns-utils
        - isns-utils-libs
        - target-isns
  initiator:
    pkgs:
      wanted:
        - iscsi-initiator-utils               #cent6/cent7/fedora/amazon
        - iscsi-initiator-utils-iscsiuio      #cent7/fedora
        - libiscsi                            #cent7/fedora
        - libiscsi-utils                      #cent7/fedora
  target:
    pkgs:
      wanted:
        - device-mapper-persistent-data                #cent6/cent7/fedora/amazon
        - netbsd-iscsi                                 #cent6/cent7/fedora
        - yum-plugin-versionlock                       #cent6/cent7/fedora
        - targetcli                                    #cent7/fedora
        - libvirt-daemon-driver-storage-iscsi          #cent7/fedora
        - udisks2-iscsi                                #cent7/fedora
        - scsi-target-utils                            #cent6/fedora
        - fcoe-utils                                   #cent6/fedora
        - libvirt-daemon-driver-storage-iscsi-direct   #fedora
      {%- endif %}
{% endmacro %}

## Debian GNU/Linux
{{ debian_codename('wheezy') }}
{{ debian_codename('jessie') }}
{{ debian_codename('stretch') }}
{{ debian_codename('buster') }}
{{ debian_codename('bullseye') }}

    ## `oscodename` is longname if `lsb-release` not installed
{{ debian_codename('wheezy', 'Debian GNU/Linux 7 (wheezy)') }}
{{ debian_codename('jessie', 'Debian GNU/Linux 8 (jessie)') }}
{{ debian_codename('stretch', 'Debian GNU/Linux 9 (stretch)') }}
{{ debian_codename('buster', 'Debian GNU/Linux 10 (buster)') }}
{{ debian_codename('bullseye', 'Debian GNU/Linux 11 (bullseye)') }}

## Ubuntu
{{ debian_codename('trusty', 'trusty') }}
{{ debian_codename('xenial', 'xenial') }}
{{ debian_codename('artful', 'artful') }}
{{ debian_codename('bionic', 'bionic') }}
{{ debian_codename('cosmic', 'cosmic') }}

## Fedora
# `oscodename` grain has long distro name
{{ fedora_codename('Fedora-30', 30, 'Fedora 30 (Thirty)') }}
{{ fedora_codename('Fedora-29', 29, 'Fedora 29 (Twenty Nine)') }}
{{ fedora_codename('Fedora-28', 28, 'Fedora 28 (Twenty Eight)') }}
{{ fedora_codename('Fedora-27', 27, 'Fedora 27 (Twenty Seven)') }}
{{ fedora_codename('Fedora-26', 26, 'Fedora 26 (Twenty Six)') }}

# vim: ft=sls
